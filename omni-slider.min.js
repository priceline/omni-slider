!function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},e=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();!function(){var s=function(){function s(i,e){if(t(this,s),i&&("DIV"===i.nodeName||"DIV"===i.tagName)){this.isIE8=!1,this.options={isOneWay:null,isDate:null,overlap:null,min:null,max:null,start:null,end:null};var n=!1;e.isOneWay&&(e.isOneWay=!1,e.overlap=!0,e.start&&!e.end&&(e.end=e.start),e.start=null,n=!0),this.init(e),this.topics={start:[],moving:[],stop:[]},this.UI={slider:null,hanldeLeft:null,handleRight:null,fill:null};var o=document.createElement("div");o.className=n?"slider one-way":"slider",this.UI.slider=o;var l=document.createElement("div");l.className="handle handle-left";var a=document.createElement("div");a.className="slider-circle",l.appendChild(a),this.UI.handleLeft=l,this.UI.slider.appendChild(this.UI.handleLeft);var h=document.createElement("div");h.className="handle handle-right";var r=document.createElement("div");r.className="slider-circle",h.appendChild(r),this.UI.handleRight=h,this.UI.slider.appendChild(this.UI.handleRight);var d=document.createElement("div");d.className="slider-fill",this.UI.fill=d,this.UI.slider.appendChild(this.UI.fill),i.appendChild(this.UI.slider),this.UI.handleLeft.style.marginLeft="-"+l.offsetWidth/2+"px",this.UI.handleRight.style.marginRight="-"+h.offsetWidth/2+"px";var p={left:this.options.start,right:this.options.end};this.move.bind(this)(p,!0),this.startingHandler=this.starting.bind(this),this.UI.handleLeft.onmousedown=this.startingHandler,this.UI.handleLeft.ontouchstart=this.startingHandler,this.UI.handleRight.onmousedown=this.startingHandler,this.UI.handleRight.ontouchstart=this.startingHandler}}return e(s,[{key:"extend",value:function(t,i){var e,s={};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e]);for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(s[e]=i[e]);return s}},{key:"init",value:function(t){this.options="object"===("undefined"==typeof t?"undefined":i(t))?this.extend(this.defaultOptions,t):this.defaultOptions,this.isIE8=/MSIE/.test(navigator.userAgent),this.options.start=this.options.start||this.options.min,this.options.end=this.options.end||this.options.max,this.options.isDate?(this.options.max=new Date(this.options.max).valueOf(),this.options.min=new Date(this.options.min).valueOf(),this.options.max<this.options.min&&(this.options.min=this.options.max),"undefined"!=typeof this.options.start&&"undefined"!=typeof this.options.end&&this.options.start<=this.options.end&&new Date(this.options.start).valueOf()>=this.options.min&&new Date(this.options.end).valueOf()<=this.options.max?(this.options.start=new Date(this.options.start).valueOf(),this.options.end=new Date(this.options.end).valueOf()):(this.options.start=new Date(this.options.min).valueOf(),this.options.end=new Date(this.options.max).valueOf())):(this.options.max=parseFloat(this.options.max),this.options.min=parseFloat(this.options.min),this.options.max<this.options.min&&(this.options.min=this.options.max),"undefined"!=typeof this.options.start&&"undefined"!=typeof this.options.end&&this.options.start<=this.options.end&&this.options.start>=this.options.min&&this.options.end<=this.options.max?(this.options.start=parseFloat(this.options.start),this.options.end=parseFloat(this.options.end)):(this.options.start=this.options.min,this.options.end=this.options.max))}},{key:"getInfo",value:function(){var t={},i=this.options.max-this.options.min,e=this.UI.fill.style.left?parseFloat(this.UI.fill.style.left.replace("%","")):0,s=this.UI.fill.style.right?parseFloat(this.UI.fill.style.right.replace("%","")):0;return t=this.options.isDate?{left:new Date(this.options.min+e/100*i),right:new Date(this.options.max-s/100*i)}:{left:this.options.min+e/100*i,right:this.options.max-s/100*i}}},{key:"starting",value:function(t){if(!this.isDisabled){var i=0,e=0;if(this.dragObj={},this.isIE8)for(this.dragObj.elNode=window.event.srcElement;this.dragObj.elNode.getAttribute("class").indexOf("handle")<0;)this.dragObj.elNode=this.dragObj.elNode.parentNode;else for(this.dragObj.elNode=t.target;!this.dragObj.elNode.classList.contains("handle");)this.dragObj.elNode=this.dragObj.elNode.parentNode;this.dragObj.dir=this.isIE8?this.dragObj.elNode.getAttribute("class").indexOf("handle-left")>=0?"left":"right":this.dragObj.elNode.classList.contains("handle-left")?"left":"right",this.isIE8?(i=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,e=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop):(i=("undefined"!=typeof t.clientX?t.clientX:t.touches[0].pageX)+(window.scrollX||window.pageXOffset),e=("undefined"!=typeof t.clientY?t.clientY:t.touches[0].pageY)+(window.scrollY||window.pageYOffset)),this.dragObj.cursorStartX=i,this.dragObj.cursorStartY=e,this.dragObj.elStartLeft=parseFloat(this.dragObj.elNode.style.left),this.dragObj.elStartRight=parseFloat(this.dragObj.elNode.style.right),isNaN(this.dragObj.elStartLeft)&&(this.dragObj.elStartLeft=0),isNaN(this.dragObj.elStartRight)&&(this.dragObj.elStartRight=0),this.isIE8?(this.UI.handleLeft.setAttribute("class",this.UI.handleLeft.getAttribute("class").replace("ontop","").replace(/^\s+|\s+$/g,"")),this.UI.handleRight.setAttribute("class",this.UI.handleRight.getAttribute("class").replace("ontop","").replace(/^\s+|\s+$/g,"")),this.dragObj.elNode.setAttribute("class",this.dragObj.elNode.getAttribute("class")+" ontop")):(this.UI.handleLeft.classList.remove("ontop"),this.UI.handleRight.classList.remove("ontop"),this.dragObj.elNode.classList.add("ontop")),this.movingHandler=this.moving.bind(this),this.stopHandler=this.stop.bind(this),this.isIE8?(document.attachEvent("onmousemove",this.movingHandler),document.attachEvent("onmouseup",this.stopHandler)):(document.addEventListener("mousemove",this.movingHandler,!0),document.addEventListener("mouseup",this.stopHandler,!0),document.addEventListener("touchmove",this.movingHandler,!0),document.addEventListener("touchend",this.stopHandler,!0)),this.stopDefault.bind(this)(t),this.isIE8?(this.UI.fill.setAttribute("class",this.UI.fill.getAttribute("class").replace("slider-transition","").replace(/^\s+|\s+$/g,"")),this.UI.handleLeft.setAttribute("class",this.UI.handleLeft.getAttribute("class").replace("slider-transition","").replace(/^\s+|\s+$/g,"")),this.UI.handleRight.setAttribute("class",this.UI.handleRight.getAttribute("class").replace("slider-transition","").replace(/^\s+|\s+$/g,""))):(this.UI.fill.classList.remove("slider-transition"),this.UI.handleLeft.classList.remove("slider-transition"),this.UI.handleRight.classList.remove("slider-transition")),this.publish("start",this.getInfo())}}},{key:"moving",value:function(t){var i=0,e=0;this.isIE8?(i=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,e=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop):(i=("undefined"!=typeof t.clientX?t.clientX:t.touches[0].pageX)+(window.scrollX||window.pageXOffset),e=("undefined"!=typeof t.clientY?t.clientY:t.touches[0].pageY)+(window.scrollY||window.pageYOffset));var s=this.UI.slider.offsetWidth,n=0;"left"===this.dragObj.dir?n=this.dragObj.elStartLeft+(i-this.dragObj.cursorStartX)/s*100:"right"===this.dragObj.dir&&(n=this.dragObj.elStartRight+(this.dragObj.cursorStartX-i)/s*100),0>n?n=0:n>100&&(n=100),n=Math.abs(n);var o=0;this.options.overlap||(o=this.UI.handleRight.offsetWidth/this.UI.slider.offsetWidth*100);var l=0;"left"===this.dragObj.dir?(l=100-o-this.UI.fill.style.right.replace("%",""),n>=l&&(n=l),this.dragObj.elNode.style.left=n+"%",this.UI.fill.style.left=n+"%"):(l=100-o-this.UI.fill.style.left.replace("%",""),n>=l&&(n=l),this.dragObj.elNode.style.right=n+"%",this.UI.fill.style.right=n+"%"),this.stopDefault.bind(this)(t),this.publish("moving",this.getInfo())}},{key:"stop",value:function(t){this.isIE8?(document.detachEvent("onmousemove",this.movingHandler),document.detachEvent("onmouseup",this.stopHandler)):(document.removeEventListener("mousemove",this.movingHandler,!0),document.removeEventListener("mouseup",this.stopHandler,!0),document.removeEventListener("touchmove",this.movingHandler,!0),document.removeEventListener("touchend",this.stopHandler,!0)),this.stopDefault.bind(this)(t),this.publish("stop",this.getInfo())}},{key:"move",value:function(t,e){this.isIE8?this.UI.fill.setAttribute("class",this.UI.fill.getAttribute("class")+" slider-transition"):(this.UI.fill.classList.add("slider-transition"),this.UI.handleLeft.classList.add("slider-transition"),this.UI.handleRight.classList.add("slider-transition"));var s=this.options.max-this.options.min;if("object"===("undefined"==typeof t?"undefined":i(t))){if(t.left){t.left<this.options.min&&(t.left=this.options.min),t.left>this.options.max&&(t.left=this.options.max);var n=(t.left-this.options.min)/s*100;this.UI.handleLeft.style.left=n+"%",this.UI.fill.style.left=n+"%"}if(t.right){t.right<this.options.min&&(t.right=this.options.min),t.right>this.options.max&&(t.right=this.options.max);var o=(this.options.max-t.right)/s*100;this.UI.handleRight.style.right=o+"%",this.UI.fill.style.right=o+"%"}!this.options.overlap&&this.UI.handleLeft.offsetLeft+this.UI.handleLeft.offsetWidth>this.UI.handleRight.offsetLeft-1&&(this.UI.fill.style.left="0%",this.UI.fill.style.right="0%",this.UI.handleLeft.style.left="0%",this.UI.handleRight.style.right="0%")}else if(!isNaN(t)){t<this.options.min&&(t=this.options.min),t>this.options.max&&(t=this.options.max);var l=(t-this.options.min)/s*100;this.UI.handleLeft.style.left=l+"%",this.UI.fill.style.left="0%",this.UI.fill.style.right=100-l+"%"}e||this.publish("moving",this.getInfo())}},{key:"stopDefault",value:function(t){this.isIE8?(window.event.cancelBubble=!0,window.event.returnValue=!1):t.preventDefault()}},{key:"disable",value:function(t){this.isDisabled=t,this.isDisabled?this.isIE8?this.UI.slider.setAttribute("class",this.UI.slider.getAttribute("class")+" slider-disabled"):this.UI.slider.classList.add("slider-disabled"):this.isIE8?this.UI.slider.setAttribute("class",this.UI.slider.getAttribute("class").replace("slider-disabled","").replace(/^\s+|\s+$/g,"")):this.UI.slider.classList.remove("slider-disabled")}},{key:"subscribe",value:function(t,i){if(this.topics.hasOwnProperty.call(this.topics,t)&&"string"==typeof t&&"function"==typeof i){var e=this.topics[t].push(i)-1;return{remove:function(){delete this.topics[t][e]}.bind(this)}}}},{key:"publish",value:function(t,i){this.topics.hasOwnProperty.call(this.topics,t)&&"string"==typeof t&&this.topics[t].forEach(function(t){t(i)})}},{key:"defaultOptions",get:function(){return{isOneWay:!1,isDate:!1,overlap:!1,min:0,max:100}}}]),s}();"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=s:window.Slider=s}()}();