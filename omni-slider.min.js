!function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},e=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),s=function(){function s(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t(this,s),i.nodeName||i.tagName){this.options={isOneWay:null,isDate:null,overlap:null,callbackFunction:null,min:null,max:null,start:null,end:null};var n=!1;e.isOneWay&&(e.isOneWay=!1,e.overlap=!0,e.start&&!e.end&&(e.end=e.start),e.start=null,n=!0),this.init(e),this.topics={start:[],moving:[],stop:[]},this.UI={slider:null,handleLeft:null,handleRight:null,fill:null};var o=document.createElement("div");o.className=n?"slider one-way":"slider",this.UI.slider=o;var a=document.createElement("div");a.className="handle handle-left";var l=document.createElement("div");l.className="slider-circle",a.appendChild(l),this.UI.handleLeft=a,this.UI.slider.appendChild(this.UI.handleLeft);var h=document.createElement("div");h.className="handle handle-right";var r=document.createElement("div");r.className="slider-circle",h.appendChild(r),this.UI.handleRight=h,this.UI.slider.appendChild(this.UI.handleRight);var d=document.createElement("div");d.className="slider-fill",this.UI.fill=d,this.UI.slider.appendChild(this.UI.fill),i.appendChild(this.UI.slider),this.UI.handleLeft.style.marginLeft="-"+a.offsetWidth/2+"px",this.UI.handleRight.style.marginRight="-"+h.offsetWidth/2+"px";var u={left:this.options.start,right:this.options.end};this.move.bind(this)(u,!0),this.startingHandler=this.starting.bind(this),this.UI.handleLeft.onmousedown=this.startingHandler,this.UI.handleLeft.ontouchstart=this.startingHandler,this.UI.handleRight.onmousedown=this.startingHandler,this.UI.handleRight.ontouchstart=this.startingHandler}}return e(s,[{key:"extend",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e={},s=void 0;for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);return e}},{key:"init",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options="object"===("undefined"==typeof t?"undefined":i(t))?this.extend(this.defaultOptions,t):this.defaultOptions,this.options.start=this.options.start||this.options.min,this.options.end=this.options.end||this.options.max,this.options.isDate?(this.options.max=new Date(this.options.max).valueOf(),this.options.min=new Date(this.options.min).valueOf(),this.options.max<this.options.min&&(this.options.min=this.options.max),"undefined"!=typeof this.options.start&&"undefined"!=typeof this.options.end&&this.options.start<=this.options.end&&new Date(this.options.start).valueOf()>=this.options.min&&new Date(this.options.end).valueOf()<=this.options.max?(this.options.start=new Date(this.options.start).valueOf(),this.options.end=new Date(this.options.end).valueOf()):(this.options.start=new Date(this.options.min).valueOf(),this.options.end=new Date(this.options.max).valueOf())):(this.options.max=parseFloat(this.options.max),this.options.min=parseFloat(this.options.min),this.options.max<this.options.min&&(this.options.min=this.options.max),"undefined"!=typeof this.options.start&&"undefined"!=typeof this.options.end&&this.options.start<=this.options.end&&this.options.start>=this.options.min&&this.options.end<=this.options.max?(this.options.start=parseFloat(this.options.start),this.options.end=parseFloat(this.options.end)):(this.options.start=this.options.min,this.options.end=this.options.max))}},{key:"getInfo",value:function(){var t={},i=this.options.max-this.options.min,e=this.UI.fill.style.left?parseFloat(this.UI.fill.style.left.replace("%","")):0,s=this.UI.fill.style.right?parseFloat(this.UI.fill.style.right.replace("%","")):0;return t=this.options.isDate?{left:new Date(this.options.min+e/100*i),right:new Date(this.options.max-s/100*i)}:{left:this.options.min+e/100*i,right:this.options.max-s/100*i},"function"==typeof this.options.callbackFunction&&(t.left=this._applyCallback_(t.left,this.options.callbackFunction),t.right=this._applyCallback_(t.right,this.options.callbackFunction)),t}},{key:"_applyCallback_",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];try{return i?i.call(void 0,t):null}catch(e){throw e}}},{key:"starting",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if(t&&!this.isDisabled){var i=0,e=0;for(this.dragObj={},this.dragObj.elNode=t.target;!this.dragObj.elNode.classList.contains("handle");)this.dragObj.elNode=this.dragObj.elNode.parentNode;this.dragObj.dir=this.dragObj.elNode.classList.contains("handle-left")?"left":"right",i=("undefined"!=typeof t.clientX?t.clientX:t.touches[0].pageX)+(window.scrollX||window.pageXOffset),e=("undefined"!=typeof t.clientY?t.clientY:t.touches[0].pageY)+(window.scrollY||window.pageYOffset),this.dragObj.cursorStartX=i,this.dragObj.cursorStartY=e,this.dragObj.elStartLeft=parseFloat(this.dragObj.elNode.style.left),this.dragObj.elStartRight=parseFloat(this.dragObj.elNode.style.right),isNaN(this.dragObj.elStartLeft)&&(this.dragObj.elStartLeft=0),isNaN(this.dragObj.elStartRight)&&(this.dragObj.elStartRight=0),this.UI.handleLeft.classList.remove("ontop"),this.UI.handleRight.classList.remove("ontop"),this.dragObj.elNode.classList.add("ontop"),this.movingHandler=this.moving.bind(this),this.stopHandler=this.stop.bind(this),document.addEventListener("mousemove",this.movingHandler,!0),document.addEventListener("mouseup",this.stopHandler,!0),document.addEventListener("touchmove",this.movingHandler,!0),document.addEventListener("touchend",this.stopHandler,!0),this.stopDefault.bind(this)(t),this.UI.fill.classList.remove("slider-transition"),this.UI.handleLeft.classList.remove("slider-transition"),this.UI.handleRight.classList.remove("slider-transition"),this.publish("start",this.getInfo())}}},{key:"moving",value:function(t){var i=("undefined"!=typeof t.clientX?t.clientX:t.touches[0].pageX)+(window.scrollX||window.pageXOffset),e=this.UI.slider.offsetWidth,s=0;"left"===this.dragObj.dir?s=this.dragObj.elStartLeft+(i-this.dragObj.cursorStartX)/e*100:"right"===this.dragObj.dir&&(s=this.dragObj.elStartRight+(this.dragObj.cursorStartX-i)/e*100),0>s?s=0:s>100&&(s=100),s=Math.abs(s);var n=0;this.options.overlap||(n=this.UI.handleRight.offsetWidth/this.UI.slider.offsetWidth*100);var o=0;"left"===this.dragObj.dir?(o=100-n-this.UI.fill.style.right.replace("%",""),s>=o&&(s=o),this.dragObj.elNode.style.left=s+"%",this.UI.fill.style.left=s+"%"):(o=100-n-this.UI.fill.style.left.replace("%",""),s>=o&&(s=o),this.dragObj.elNode.style.right=s+"%",this.UI.fill.style.right=s+"%"),this.stopDefault.bind(this)(t),this.publish("moving",this.getInfo())}},{key:"stop",value:function(t){document.removeEventListener("mousemove",this.movingHandler,!0),document.removeEventListener("mouseup",this.stopHandler,!0),document.removeEventListener("touchmove",this.movingHandler,!0),document.removeEventListener("touchend",this.stopHandler,!0),this.stopDefault.bind(this)(t),this.publish("stop",this.getInfo())}},{key:"move",value:function(t,e){var s=t;this.UI.fill.classList.add("slider-transition"),this.UI.handleLeft.classList.add("slider-transition"),this.UI.handleRight.classList.add("slider-transition");var n=this.options.max-this.options.min;if("object"===("undefined"==typeof s?"undefined":i(s))){if(s.left){s.left<this.options.min&&(s.left=this.options.min),s.left>this.options.max&&(s.left=this.options.max);var o=(s.left-this.options.min)/n*100;this.UI.handleLeft.style.left=o+"%",this.UI.fill.style.left=o+"%"}if(s.right){s.right<this.options.min&&(s.right=this.options.min),s.right>this.options.max&&(s.right=this.options.max);var a=(this.options.max-s.right)/n*100;this.UI.handleRight.style.right=a+"%",this.UI.fill.style.right=a+"%"}!this.options.overlap&&this.UI.handleLeft.offsetLeft+this.UI.handleLeft.offsetWidth>this.UI.handleRight.offsetLeft-1&&(this.UI.fill.style.left="0%",this.UI.fill.style.right="0%",this.UI.handleLeft.style.left="0%",this.UI.handleRight.style.right="0%")}else if(!isNaN(s)){s<this.options.min&&(s=this.options.min),s>this.options.max&&(s=this.options.max);var l=(s-this.options.min)/n*100;this.UI.handleLeft.style.left=l+"%",this.UI.fill.style.left="0%",this.UI.fill.style.right=100-l+"%"}e||this.publish("moving",this.getInfo())}},{key:"stopDefault",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];t&&t.preventDefault()}},{key:"disable",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.isDisabled=t,this.isDisabled?this.UI.slider.classList.add("slider-disabled"):this.UI.slider.classList.remove("slider-disabled")}},{key:"subscribe",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(!t||!i)return{};if(!this.topics.hasOwnProperty.call(this.topics,t)||"string"!=typeof t||"function"!=typeof i)return{};var e=this.topics[t].push(i)-1;return{remove:function(){delete this.topics[t][e]}.bind(this)}}},{key:"publish",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];t&&i&&this.topics.hasOwnProperty.call(this.topics,t)&&"string"==typeof t&&this.topics[t].forEach(function(t){t(i)})}},{key:"destroy",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];document.removeEventListener("mousemove",this.movingHandler,!0),document.removeEventListener("mouseup",this.stopHandler,!0),document.removeEventListener("touchmove",this.movingHandler,!0),document.removeEventListener("touchend",this.stopHandler,!0),this.UI.handleLeft.onmousedown=null,this.UI.handleLeft.ontouchstart=null,this.UI.handleRight.onmousedown=null,this.UI.handleRight.ontouchstart=null,t&&this.UI.slider.parentNode.removeChild(this.UI.slider),this.UI=null}},{key:"defaultOptions",get:function(){return{isOneWay:!1,isDate:!1,overlap:!1,callbackFunction:null,min:0,max:100}}}]),s}();"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=s:window.Slider=s}();